var v=Object.defineProperty;var y=(r,t,s)=>t in r?v(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s;var m=(r,t,s)=>y(r,typeof t!="symbol"?t+"":t,s);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))i(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const d of n.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function s(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerPolicy&&(n.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?n.credentials="include":e.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(e){if(e.ep)return;e.ep=!0;const n=s(e);fetch(e.href,n)}})();class p{constructor(t="",s="",i=!1){this._id=t,this._item=s,this._checked=i}get id(){return this._id}set id(t){this._id=t}get item(){return this._item}set item(t){this._item=t}get checked(){return this._checked}set checked(t){this._checked=t}}const o=class o{constructor(t=[]){this._list=t}get list(){return this._list}load(){const t=localStorage.getItem("myList");if(typeof t!="string")return;JSON.parse(t).forEach(i=>{const e=new p(i._id,i._item,i._checked);o.instance.addItem(e)})}save(){localStorage.setItem("myList",JSON.stringify(this._list))}clearList(){this._list=[],this.save()}addItem(t){this._list.push(t),this.save()}removeItem(t){this._list=this._list.filter(s=>s.id!==t),this.save()}reorderItems(t,s){const i=this._list.findIndex(n=>n.id===t),e=this._list.findIndex(n=>n.id===s);if(i!==-1&&e!==-1){const[n]=this._list.splice(i,1);this._list.splice(e,0,n),this.save()}}};m(o,"instance",new o);let l=o;const h=class h{constructor(){m(this,"ul");this.ul=document.getElementById("listItems")}clear(){this.ul.innerHTML=""}render(t){this.clear(),t.list.forEach((s,i)=>{const e=document.createElement("li");e.className="item",e.draggable=!0,e.setAttribute("data-id",s.id),e.setAttribute("data-index",i.toString()),e.addEventListener("dragstart",this.dragStart),e.addEventListener("dragover",this.dragOver),e.addEventListener("drop",this.drop.bind(this));const n=document.createElement("input");n.type="checkbox",n.id=s.id,n.tabIndex=0,n.checked=s.checked,e.append(n),n.addEventListener("change",()=>{s.checked=!s.checked,t.save()});const d=document.createElement("label");d.htmlFor=s.id,d.textContent=s.item,e.append(d);const a=document.createElement("button");a.className="button edit-button",a.innerHTML="✏️",a.title="Edit task",e.append(a),a.addEventListener("click",()=>{this.editItem(s.id)});const c=document.createElement("button");c.className="button delete-button",c.textContent="X",c.title="Delete task",e.append(c),c.addEventListener("click",()=>{t.removeItem(s.id),this.render(t)}),this.ul.append(e)})}dragStart(t){t.dataTransfer&&t.target instanceof HTMLLIElement&&(t.dataTransfer.setData("text/plain",t.target.getAttribute("data-id")||""),t.dataTransfer.effectAllowed="move")}dragOver(t){t.preventDefault(),t.target instanceof HTMLLIElement&&t.target.classList.add("drag-over")}drop(t){var n;t.preventDefault();const s=l.instance,i=(n=t.dataTransfer)==null?void 0:n.getData("text"),e=t.target.getAttribute("data-id");i&&e&&i!==e&&(s.reorderItems(i,e),this.render(s)),t.target instanceof HTMLLIElement&&t.target.classList.remove("drag-over")}editItem(t){const s=l.instance,i=s.list.find(e=>e.id===t);if(i){const e=prompt("Enter new task name:",i.item);e!==null&&e.trim()!==""&&(i.item=e.trim(),s.save(),this.render(s))}}};m(h,"instance",new h);let g=h;const b=()=>{const r=l.instance,t=g.instance,s=document.getElementById("itemEntryForm"),i=document.getElementById("newItem"),e=document.getElementById("addItem"),n=document.getElementById("clearItemsButton"),d=document.getElementById("themeToggle"),a=I=>{I.preventDefault();const f=i.value.trim();if(!f.length)return;const L=r.list.length?parseInt(r.list[r.list.length-1].id)+1:1,E=new p(L.toString(),f);r.addItem(E),t.render(r),i.value=""};s.addEventListener("submit",a),e.addEventListener("click",a),n.addEventListener("click",()=>{r.clearList(),t.clear()}),d.addEventListener("click",()=>{document.body.classList.toggle("light-theme"),localStorage.setItem("theme",document.body.classList.contains("light-theme")?"light":"dark")});const c=localStorage.getItem("theme");(c==="light"||!c&&window.matchMedia("(prefers-color-scheme: light)").matches)&&document.body.classList.add("light-theme"),r.load(),t.render(r);const u=document.getElementById("listItems");u.addEventListener("dragstart",t.dragStart),u.addEventListener("dragover",t.dragOver),u.addEventListener("drop",t.drop)};document.addEventListener("DOMContentLoaded",b);
